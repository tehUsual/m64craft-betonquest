variables:
  s5:
    star_loc:             396;81;-440;marocraft
    star_loc_xyz:         396 81 -440
    eye1_loc:             397;70;-436;marocraft
    eye2_loc:             397;70;-435;marocraft
    eye3_loc:             398;68;-434;marocraft
    eye4_loc:             400;68;-435;marocraft
    eye5_loc:             400;68;-436;marocraft
    eye6_loc:             398;68;-437;marocraft


events:
  ### STAR 5 - BIG BOO'S BALCONY
  # Init
  init_s5:                "folder e_obj_add_s5_eyes"
  e_obj_add_s5_eyes:      "folder e_obj_add_s5_eye1,e_obj_add_s5_eye2,e_obj_add_s5_eye3,e_obj_add_s5_eye4,e_obj_add_s5_eye5,e_obj_add_s5_eye6"
  e_obj_add_s5_eye1:      "objective add o_s5_eye1"
  e_obj_add_s5_eye2:      "objective add o_s5_eye2"
  e_obj_add_s5_eye3:      "objective add o_s5_eye3"
  e_obj_add_s5_eye4:      "objective add o_s5_eye4"
  e_obj_add_s5_eye5:      "objective add o_s5_eye5"
  e_obj_add_s5_eye6:      "objective add o_s5_eye6"

  # Eye 1
  e_s5_eye1:              "folder core-sfx.e_boo_laugh,e_s5_add_tag_eye1,if_all_eyes_s5"
  e_s5_add_tag_eye1:      "tag add s5_eye1"
  # Eye 2
  e_s5_eye2:              "folder core-sfx.e_boo_laugh,e_s5_add_tag_eye2,if_all_eyes_s5"
  e_s5_add_tag_eye2:      "tag add s5_eye2"
  # Eye 3
  e_s5_eye3:              "folder core-sfx.e_boo_laugh,e_s5_add_tag_eye3,if_all_eyes_s5"
  e_s5_add_tag_eye3:      "tag add s5_eye3"
  # Eye 4
  e_s5_eye4:              "folder core-sfx.e_boo_laugh,e_s5_add_tag_eye4,if_all_eyes_s5"
  e_s5_add_tag_eye4:      "tag add s5_eye4"
  # Eye 5
  e_s5_eye5:              "folder core-sfx.e_boo_laugh,e_s5_add_tag_eye5,if_all_eyes_s5"
  e_s5_add_tag_eye5:      "tag add s5_eye5"
  # Eye 6
  e_s5_eye6:              "folder core-sfx.e_boo_laugh,e_s5_add_tag_eye6,if_all_eyes_s5"
  e_s5_add_tag_eye6:      "tag add s5_eye6"

  # If all eyes
  if_all_eyes_s5:         "if chk_s5_eye_all e_s5_boss_dead else core-main.e_dummy"
  e_s5_boss_dead:         "folder e_s5_spawn_star"

  # Spawn star
  e_s5_spawn_star:        "folder core-sfx.e_boo_die,e_s5_show_star,e_s5_summon_firework,core-sfx.e_star_spawn,e_s5_notif_spawn_star,e_obj_add_s5_star"
  e_s5_show_star:         "command togglefakeblock %player% bbh_star_5 show"
  e_s5_summon_firework:   "command execute in minecraft:overworld run summon firework_rocket $s5.star_loc_xyz$ {LifeTime:10,Motion:[0d,1d,0d],shotAtAngle:1b,FireworksItem:{id:firework_rocket,Count:1,tag:{Fireworks:{Flight:20,Explosions:[{Type:1,Flicker:1b,Colors:[I;14602026]},{Colors:[I;11743532]},{Colors:[I;4312372]}]}}}}"
  e_s5_notif_spawn_star:  "notify &3A star has spawned! io:title"
  e_obj_add_s5_star:      "objective add o_s5_star"

  # Win
  win_s5:                 "folder e_notif_s5_win,core-sfx.e_got_star,deit_s5,if_firstwin_s5"
  e_notif_s5_win:         "notify &3Big Boo's balcony\n&2Cleared! io:title"

  # First win
  if_firstwin_s5:         "if !chk_s5_obtained firstwin_s5 else core-main.e_dummy"
  firstwin_s5:            "folder e_broad_s5_first,tag_add_s5_win,e_stop_music,exit_star"
  e_broad_s5_first:       "command broadcast &6%player% &2got a star: [BBH] Big Boo's balcony"
  tag_add_s5_win:         "tag add s5"

  # Cleanup
  deit_s5:                "folder e_obj_del_s5_star,e_obj_del_s5_eyes,e_s5_del_tags,e_s5_despawn_star"
  e_obj_del_s5_star:      "objective remove o_s5_star"
  e_obj_del_s5_eyes:      "folder e_obj_del_s5_eye1,e_obj_del_s5_eye2,e_obj_del_s5_eye3,e_obj_del_s5_eye4,e_obj_del_s5_eye5,e_obj_del_s5_eye6"
  e_obj_del_s5_eye1:      "objective remove o_s5_eye1"
  e_obj_del_s5_eye2:      "objective remove o_s5_eye2"
  e_obj_del_s5_eye3:      "objective remove o_s5_eye3"
  e_obj_del_s5_eye4:      "objective remove o_s5_eye4"
  e_obj_del_s5_eye5:      "objective remove o_s5_eye5"
  e_obj_del_s5_eye6:      "objective remove o_s5_eye6"
  e_s5_del_tags:          "run ^tag delete s5_eye1 ^tag delete s5_eye2 ^tag delete s5_eye3 ^tag delete s5_eye4 ^tag delete s5_eye5 ^tag delete s5_eye6"

  e_s5_despawn_star:      "folder e_s5_hide_star"
  e_s5_hide_star:         "command togglefakeblock %player% bbh_star_5 hide"


conditions:
  chk_s5_obtained:        "tag s5"
  chk_s5_eye_1:           "tag s5_eye1"
  chk_s5_eye_2:           "tag s5_eye2"
  chk_s5_eye_3:           "tag s5_eye3"
  chk_s5_eye_4:           "tag s5_eye4"
  chk_s5_eye_5:           "tag s5_eye5"
  chk_s5_eye_6:           "tag s5_eye6"
  chk_s5_eye_all:         "and chk_s5_eye_1,chk_s5_eye_2,chk_s5_eye_3,chk_s5_eye_4,chk_s5_eye_5,chk_s5_eye_6"

  chk_s5_spawned:         "tag s5_spawned"
  chk_s5_spawn_count:     "globalpoint bbh_s5 1"


objectives:
  o_s5_star:              "action right any loc:$s5.star_loc$ events:win_s5"
  o_s5_eye1:              "action right any loc:$s5.eye1_loc$ events:e_s5_eye1"
  o_s5_eye2:              "action right any loc:$s5.eye2_loc$ events:e_s5_eye2"
  o_s5_eye3:              "action right any loc:$s5.eye3_loc$ events:e_s5_eye3"
  o_s5_eye4:              "action right any loc:$s5.eye4_loc$ events:e_s5_eye4"
  o_s5_eye5:              "action right any loc:$s5.eye5_loc$ events:e_s5_eye5"
  o_s5_eye6:              "action right any loc:$s5.eye6_loc$ events:e_s5_eye6"
