variables:
  swc_block:      "minecraft:crimson_slab"
  swc_delay:      14  # seconds
  swc_interval:   2   # seconds
  swc1: 
    swc:
      region:     jbr_swc_1
      y:  88
      x1: 43
      z1: 423
      x2: 44
      z2: 424


events:
  init_switch_1:            "folder e_init_switch_1"
  deit_switch_1:            "folder e_deit_switch_1"  # hide_switch_blocks_1

  # Init
  e_init_switch_1:          "folder e_obj_add_swc_1"
  e_obj_add_swc_1:          "objective add o_swc_1_enter"

  # Cleanup
  e_deit_switch_1:          "folder e_obj_del_swc_1,e_if_swc_1_cancel"
  e_obj_del_swc_1:          "objective remove o_swc_1_enter"

  # Cleanup, if this player leaves
  e_if_swc_1_cancel:        "if chk_swc_1_local_pressed e_swc_1_timeout else core-main.e_dummy"


  # Switch press
  e_swc_1_pressed:          "folder e_swc_1_tag_add,e_swc_1_gtag_add,e_swc_1_hide,core-sfx.e_switchtimer,e_obj_add_swc_1_delay,show_switch_blocks_1"
  e_swc_1_tag_add:          "tag add jbr_swc_1_pressed"
  e_swc_1_gtag_add:         "globaltag add jbr_swc_1_pressed"
  e_swc_1_hide:             "command execute in minecraft:overworld run fill $swc1.swc.x1$ $swc1.swc.y$ $swc1.swc.z1$ $swc1.swc.x2$ $swc1.swc.y$ $swc1.swc.z2$ minecraft:air"
  e_obj_add_swc_1_delay:    "objective add o_swc_1_delay"

  # Switch timeout
  e_swc_1_timeout:          "folder e_swc_1_tag_del,e_swc_1_gtag_del,e_swc_1_show,e_obj_del_swc_1_delay,hide_switch_blocks_1"
  e_swc_1_tag_del:          "tag delete jbr_swc_1_pressed"
  e_swc_1_gtag_del:         "globaltag delete jbr_swc_1_pressed"
  e_swc_1_show:             "command execute in minecraft:overworld run fill $swc1.swc.x1$ $swc1.swc.y$ $swc1.swc.z1$ $swc1.swc.x2$ $swc1.swc.y$ $swc1.swc.z2$ $swc_block$"
  e_obj_del_swc_1_delay:    "objective remove o_swc_1_delay"


conditions:
  chk_swc_1_pressed:        "globaltag jbr_swc_1_pressed"
  chk_swc_1_local_pressed:  "tag jbr_swc_1_pressed"


objectives:
  o_swc_1_enter:            "region $swc1.swc.region$ enter conditions:!chk_swc_1_pressed events:e_swc_1_pressed"
  o_swc_1_delay:            "delay $swc_delay$ seconds interval:$swc_interval$ events:e_swc_1_timeout"

