variables:
  s6:
    star_loc:             -411;78;-68;marocraft
    log_loc_1:            -395;76;-57;marocraft
    log_loc_2:            -395;75;-57;marocraft
    tp_star_loc:          -412;75;-66;marocraft;-90;0


### STAR 6 - BEHIND CHAIN CHOMP'S GATE
events:
  # Init
  init_s6:                "folder e_obj_add_s6_star,e_obj_add_s6_log_1"
  e_obj_add_s6_star:      "objective add o_s6_star"
  e_obj_add_s6_log_1:     "objective add o_s6_jump_log_1"
  
  # Log 1
  e_s6_log_1_remove:      "folder e_s6_del_log_1,core-sfx.e_block_break,e_obj_add_s6_log_2"
  e_s6_del_log_1:         "setblock AIR $s6.log_loc_1$"
  e_obj_add_s6_log_2:     "objective add o_s6_jump_log_2"

  # Log 2
  e_s6_log_2_remove:      "folder e_s6_del_log_2,core-sfx.e_block_break,core-sfx.e_correct,e_s6_restore_log_tp"
  e_s6_del_log_2:         "setblock AIR $s6.log_loc_2$"
  e_s6_restore_log_tp:    "folder e_s6_log_restore,e_s6_tp_to_star,core-sfx.e_warp delay:2"
  e_s6_log_restore:       "folder e_s6_setblock_log_1,e_s6_setblock_log_2"
  e_s6_setblock_log_1:    "setblock SPRUCE_LOG $s6.log_loc_1$"
  e_s6_setblock_log_2:    "setblock SPRUCE_LOG $s6.log_loc_2$"
  e_s6_tp_to_star:        "teleport $s6.tp_star_loc$"

  # Win
  win_s6:                 "folder e_notif_s6_win,core-sfx.e_got_star,deit_s6,if_firstwin_s6"
  e_notif_s6_win:         "notify &3Behind chain chomp's gate\n&2Cleared! io:title"

  # First win
  if_firstwin_s6:         "if !chk_s6_obtained firstwin_s6 else core-main.e_dummy"
  firstwin_s6:            "folder e_broad_s6_first,tag_add_s6_win,e_stop_music,exit_star"
  e_broad_s6_first:       "command broadcast &6%player% &2got a star: [BOB] Behind chain chomp's gate"
  tag_add_s6_win:         "tag add s6"

  # Cleanup
  deit_s6:                "folder e_obj_del_s6_star,e_obj_del_s6_log_1,e_obj_del_s6_log_2,e_s6_log_restore"
  e_obj_del_s6_star:      "objective remove o_s6_star"
  e_obj_del_s6_log_1:     "objective remove o_s6_jump_log_1"
  e_obj_del_s6_log_2:     "objective remove o_s6_jump_log_2"


conditions:
  chk_s6_obtained:        "tag s6"

  chk_s6_ontop_log:       "region bob_s6_log"
  chk_s6_log_1:           "testforblock $s6.log_loc_1$ SPRUCE_LOG"
  chk_s6_log_2:           "testforblock $s6.log_loc_2$ SPRUCE_LOG"


objectives:
  o_s6_star:              "action right any loc:$s6.star_loc$ events:win_s6"

  o_s6_jump_log_1:        "jump 1 conditions:chk_s6_ontop_log,chk_s6_log_1 events:e_s6_log_1_remove"
  o_s6_jump_log_2:        "jump 1 conditions:chk_s6_ontop_log,chk_s6_log_2,!chk_s6_log_1 events:e_s6_log_2_remove"
