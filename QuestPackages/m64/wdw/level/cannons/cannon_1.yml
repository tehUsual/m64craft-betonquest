variables:
  c1:
    region:               wdw_cannon_1


events:
  ### CANNON - 1 - TOP PILLAR
  reset_c1:               "folder deit_c1,init_c1"
  # Init
  init_c1:                "folder e_obj_add_c1_enter"
  e_obj_add_c1_enter:     "objective add o_cannon_enter_1"
  # Enter
  e_c1_enter:             "folder e_sfx_c_ready,e_obj_add_c1_stay"
  e_obj_add_c1_stay:      "objective add o_cannon_wait_1"
  # Waited
  e_c1_waited:            "if chk_in_cannon_1 e_c1_load else e_obj_add_c1_enter"
  # Load
  e_c1_load:              "folder e_give_cannonpearl,e_obj_add_c1_shoot,e_obj_add_c1_exit"
  e_obj_add_c1_shoot:     "objective add o_cannon_shoot_1"
  e_obj_add_c1_exit:      "objective add o_cannon_exit_1"
  # Shoot
  e_c1_shoot:             "folder e_sfx_c_shoot,e_ptc_explosion"
  # Exit
  e_c1_exit:              "folder reset_c1"
  # Cleanup
  deit_c1:                "folder e_take_cannonpearl,e_obj_del_c1_enter,e_obj_del_c1_wait,e_obj_del_c1_shoot,e_obj_del_c1_exit"
  e_obj_del_c1_enter:     "objective remove o_cannon_enter_1"
  e_obj_del_c1_wait:      "objective remove o_cannon_wait_1"
  e_obj_del_c1_shoot:     "objective remove o_cannon_shoot_1"
  e_obj_del_c1_exit:      "objective remove o_cannon_exit_1"


conditions:
  chk_in_cannon_1:        "region $c1.region$"


objectives:
  o_cannon_enter_1:       "region $c1.region$ enter events:e_c1_enter"
  o_cannon_wait_1:        "delay 3 seconds interval:1 events:e_c1_waited"
  o_cannon_shoot_1:       "action right any conditions:chk_in_cannon_1,chk_holding_pearl events:e_c1_shoot"
  o_cannon_exit_1:        "region $c1.region$ exit events:e_c1_exit"
